import{u as f}from"./composables.7ade1a29.js";import{a,r as b,b as x,e as _,f as v,h as u,w as m,i as c,t as B,u as N,F as U,o as k,j as A}from"./entry.4b74c2e0.js";const P=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0)),l=(e,t)=>(r,n)=>(f(()=>e({...P(r),...n.attrs},n)),()=>{var o,i;return t?(i=(o=n.slots).default)==null?void 0:i.call(o):null}),d={accesskey:String,autocapitalize:String,autofocus:{type:Boolean,default:void 0},class:String,contenteditable:{type:Boolean,default:void 0},contextmenu:String,dir:String,draggable:{type:Boolean,default:void 0},enterkeyhint:String,exportparts:String,hidden:{type:Boolean,default:void 0},id:String,inputmode:String,is:String,itemid:String,itemprop:String,itemref:String,itemscope:String,itemtype:String,lang:String,nonce:String,part:String,slot:String,spellcheck:{type:Boolean,default:void 0},style:String,tabindex:String,title:String,translate:String};a({name:"NoScript",inheritAttrs:!1,props:{...d,title:String,body:Boolean,renderPriority:[String,Number]},setup:l((e,{slots:t})=>{var o;const r={...e},n=(((o=t.default)==null?void 0:o.call(t))||[]).filter(({children:i})=>i).map(({children:i})=>i).join("");return n&&(r.children=n),{noscript:[r]}})});a({name:"Link",inheritAttrs:!1,props:{...d,as:String,crossorigin:String,disabled:Boolean,fetchpriority:String,href:String,hreflang:String,imagesizes:String,imagesrcset:String,integrity:String,media:String,prefetch:{type:Boolean,default:void 0},referrerpolicy:String,rel:String,sizes:String,title:String,type:String,methods:String,target:String,body:Boolean,renderPriority:[String,Number]},setup:l(e=>({link:[e]}))});a({name:"Base",inheritAttrs:!1,props:{...d,href:String,target:String},setup:l(e=>({base:e}))});const w=a({name:"Title",inheritAttrs:!1,setup:l((e,{slots:t})=>{var n,o,i;return{title:((i=(o=(n=t.default)==null?void 0:n.call(t))==null?void 0:o[0])==null?void 0:i.children)||null}})});a({name:"Meta",inheritAttrs:!1,props:{...d,charset:String,content:String,httpEquiv:String,name:String,body:Boolean,renderPriority:[String,Number]},setup:l(e=>{const t={...e};return t.httpEquiv&&(t["http-equiv"]=t.httpEquiv,delete t.httpEquiv),{meta:[t]}})});a({name:"Style",inheritAttrs:!1,props:{...d,type:String,media:String,nonce:String,title:String,scoped:{type:Boolean,default:void 0},body:Boolean,renderPriority:[String,Number]},setup:l((e,{slots:t})=>{var o,i,p;const r={...e},n=(p=(i=(o=t.default)==null?void 0:o.call(t))==null?void 0:i[0])==null?void 0:p.children;return n&&(r.children=n),{style:[r]}})});const C=a({name:"Head",inheritAttrs:!1,setup:(e,t)=>()=>{var r,n;return(n=(r=t.slots).default)==null?void 0:n.call(r)}});a({name:"Html",inheritAttrs:!1,props:{...d,manifest:String,version:String,xmlns:String,renderPriority:[String,Number]},setup:l(e=>({htmlAttrs:e}),!0)});a({name:"Body",inheritAttrs:!1,props:{...d,renderPriority:[String,Number]},setup:l(e=>({bodyAttrs:e}),!0)});let g;const E=new Uint8Array(16);function I(){if(!g&&(g=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(E)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function V(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}const j=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),S={randomUUID:j};function D(e,t,r){if(S.randomUUID&&!t&&!e)return S.randomUUID();e=e||{};const n=e.random||(e.rng||I)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return V(n)}const H={class:"h-screen w-screen grid place-items-center bg-black"},T={class:"flex flex-col items-centers space-y-4"},q={class:"text-gray-100"},R=a({__name:"index",setup(e){const t=b(""),{$socket:r}=x(),n=D();_(()=>{r.onopen=()=>{localStorage.setItem(`connection-${n}`,n),r.send(n)},r.onmessage=({data:i})=>{console.log("data",i),t.value=i},r.onclose=function(){console.log("disconnected")}});const o=()=>{fetch("/api/sendmessage",{method:"POST",body:JSON.stringify({message:Math.random(),sender:localStorage.getItem(`connection-${n}`)})}).then(i=>i.json()).then(i=>{console.log("sent")})};return(i,p)=>{const y=w,h=C;return k(),v(U,null,[u(h,null,{default:m(()=>[u(y,null,{default:m(()=>[A("Nuxt 3 Websocket")]),_:1})]),_:1}),c("div",H,[c("span",T,[c("span",q,B(N(t)),1),c("button",{onClick:o,class:"bg-purple-500 text-gray-50 font-semibold px-5 py-2 rounded-lg"},"Click me to send random number")])])],64)}}});export{R as default};
